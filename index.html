<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LGED ‚Äì Last Fant√¥me</title>

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#0b0f1a;
  color:#fff;
}
header {
  background:#11182a;
  padding:15px;
  text-align:center;
}
h1 { color:#00e0ff; }

.container {
  max-width:1100px;
  margin:auto;
  padding:15px;
}
.card {
  background:#161f36;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
}
input, select, button {
  width:100%;
  padding:6px;
  margin:4px 0;
  border-radius:5px;
  border:none;
}
button {
  background:#00e0ff;
  font-weight:bold;
}
table {
  width:100%;
  border-collapse:collapse;
}
th, td {
  border-bottom:1px solid #2a3558;
  padding:6px;
  text-align:center;
}
.hidden { display:none; }
.result {
  background:#0e1528;
  padding:8px;
  border-radius:5px;
  margin-top:5px;
}
</style>
</head>

<body>

<header>
<h1>LGED ‚Äì Last Fant√¥me</h1>
<p>Gestion des h√©ros ‚Äì √âquipe LGED</p>
</header>

<div class="container">

<!-- üîç RECHERCHE PUBLIQUE -->
<div class="card">
<h2>üîç Recherche</h2>

<select id="searchHero"></select>

<select id="searchStars">
<option value="0">0 ‚≠ê</option><option value="1">1 ‚≠ê</option>
<option value="2">2 ‚≠ê</option><option value="3">3 ‚≠ê</option>
<option value="4">4 ‚≠ê</option><option value="5">5 ‚≠ê</option>
</select>

<select id="searchLevel"></select>

<button onclick="search()">Rechercher</button>
<div id="results"></div>
</div>

<!-- üîê ADMIN -->
<div class="card">
<h2>üîê Administrateur</h2>
<input type="password" id="adminPass" placeholder="Mot de passe admin">
<button onclick="login()">Connexion</button>

<div id="adminPanel" class="hidden">

<h3>üßæ Fiche membre</h3>
<input id="pseudo" placeholder="Pseudo du membre">

<table id="heroesTable"></table>

<button onclick="saveMember()">üíæ Sauvegarder / Modifier</button>

<h3>üìã Membres existants</h3>
<select id="memberSelect" onchange="loadMember()"></select>

</div>
</div>

</div>

<script>
const ADMIN_PASSWORD = "admin123";

const heroes = [
"Kimberly","Murphy","Williams","Stetmann","Marshall","Adam","Mason",
"Violet","Scarlett","Monica","Richard","Gump","Loki","DVA","Lucius",
"Carlie","Schyler","Morrison","Sarah","Maxwell","Cage","Ambolt",
"Tesla","Fiona","McGregor","Swift","Venom","Elsa","Kane",
"Farhad","Bob","Charlie","Lori","Mary"
];

function init() {
  heroes.forEach(h=>{
    searchHero.innerHTML+=`<option>${h}</option>`;
  });
  for(let i=1;i<=300;i++){
    searchLevel.innerHTML+=`<option>${i}</option>`;
  }
  buildHeroesTable();
  loadMembersList();
}
init();

function login(){
  if(adminPass.value===ADMIN_PASSWORD){
    adminPanel.classList.remove("hidden");
  } else alert("Mot de passe incorrect");
}

function buildHeroesTable(){
  let html="<tr><th>H√©ros</th><th>‚≠ê</th><th>Niveau</th></tr>";
  heroes.forEach(h=>{
    html+=`
    <tr>
      <td>${h}</td>
      <td>
        <select id="star_${h}">
          <option>0</option><option>1</option><option>2</option>
          <option>3</option><option>4</option><option>5</option>
        </select>
      </td>
      <td>
        <select id="lvl_${h}">
          ${Array.from({length:301},(_,i)=>`<option>${i}</option>`).join("")}
        </select>
      </td>
    </tr>`;
  });
  heroesTable.innerHTML=html;
}

function saveMember(){
  const pseudoVal=pseudo.value.trim();
  if(!pseudoVal){ alert("Pseudo manquant"); return; }

  let members=JSON.parse(localStorage.getItem("members")||"[]");
  members=members.filter(m=>m.pseudo!==pseudoVal);

  let heroData=[];
  heroes.forEach(h=>{
    heroData.push({
      hero:h,
      stars:parseInt(document.getElementById("star_"+h).value),
      level:parseInt(document.getElementById("lvl_"+h).value)
    });
  });

  members.push({pseudo:pseudoVal, heroes:heroData});
  localStorage.setItem("members",JSON.stringify(members));
  loadMembersList();
  alert("Membre sauvegard√©");
}

function loadMembersList(){
  memberSelect.innerHTML="<option value=''>-- Choisir --</option>";
  let members=JSON.parse(localStorage.getItem("members")||"[]");
  members.forEach(m=>{
    memberSelect.innerHTML+=`<option>${m.pseudo}</option>`;
  });
}

function loadMember(){
  let name=memberSelect.value;
  if(!name) return;
  let members=JSON.parse(localStorage.getItem("members")||"[]");
  let m=members.find(x=>x.pseudo===name);
  pseudo.value=m.pseudo;
  m.heroes.forEach(h=>{
    document.getElementById("star_"+h.hero).value=h.stars;
    document.getElementById("lvl_"+h.hero).value=h.level;
  });
}

function search(){
  results.innerHTML="";
  let hero=searchHero.value;
  let stars=parseInt(searchStars.value);
  let lvl=parseInt(searchLevel.value);
  let members=JSON.parse(localStorage.getItem("members")||"[]");

  members.forEach(m=>{
    let h=m.heroes.find(x=>x.hero===hero);
    if(h && h.stars>=stars && h.level>=lvl){
      results.innerHTML+=`<div class="result">${m.pseudo}</div>`;
    }
  });

  if(results.innerHTML===""){
    results.innerHTML="<p>Aucun r√©sultat</p>";
  }
}
</script>

</body>
</html>
